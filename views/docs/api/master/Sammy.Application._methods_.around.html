<div class='individual meth' id='Sammy.Application-around'>
  <a href='/docs/api/master/'>
    <strong>&laquo; Back</strong>
  </a>
  <h3>
    <strong>Sammy.Application</strong>
    <a href='Sammy.Application._methods_.around.html'>around</a>
    <span>
      (
      <em>callback</em>
      )
    </span>
  </h3>
  <div class='links'>
    <a href='Sammy.Application._methods_.around.html#comments'>Comments</a>
    |
    <a href='https://github.com/quirkey/sammy/tree/master/lib/sammy.js#L724' target='all'>Show in GitHub</a>
  </div><div class='doc'><p>Adds an around filter to the application. around filters are functions&#x000A;that take a single argument <code>callback</code> which is the entire route&#x000A;execution path wrapped up in a closure. This means you can decide whether&#x000A;or not to proceed with execution by not invoking <code>callback</code> or,&#x000A;more usefuly wrapping callback inside the result of an asynchronous execution.</p>&#x000A;&#x000A;<h3>Example</h3>&#x000A;&#x000A;<p>The most common use case for around() is calling a <em>possibly</em> async function&#x000A;and executing the route within the functions callback:</p>&#x000A;&#x000A;<pre class='prettyprint'><code> var app = $.sammy(function() {&#x000A;&#x000A;   var current_user = false;&#x000A;&#x000A;   function checkLoggedIn(callback) {&#x000A;     // /session returns a JSON representation of the logged in user&#x000A;     // or an empty object&#x000A;     if (!current_user) {&#x000A;       $.getJSON('/session', function(json) {&#x000A;         if (json.login) {&#x000A;           // show the user as logged in&#x000A;           current_user = json;&#x000A;           // execute the route path&#x000A;           callback();&#x000A;         } else {&#x000A;           // show the user as not logged in&#x000A;           current_user = false;&#x000A;           // the context of aroundFilters is an EventContext&#x000A;           this.redirect('#/login');&#x000A;         }&#x000A;       });&#x000A;     } else {&#x000A;       // execute the route path&#x000A;       callback();&#x000A;     }&#x000A;   };&#x000A;&#x000A;   this.around(checkLoggedIn);&#x000A;&#x000A; });&#x000A;</code></pre></div><div id='comments'>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'sammyjsorg'; // required: replace example with your forum shortname

    // The following are highly recommended additional parameters. Remove the slashes in front to use.
    var disqus_identifier = "sammyjsdocs-master-Sammy.Application-around";
    var disqus_url = 'http://www.sammyjs.org/docs/api/master/Sammy.Application._methods_.around.html';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</div>
